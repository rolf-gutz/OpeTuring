<title>Gerenciar Pedidos </title>

{% extends "layout.html" %}

{% block rolf %}

<div class="container" style="height: 85%; width: 250%;">
  <form action="consultaPedidos" method="POST" name="form_consulta" class="ml-3">
    <div class=form-group>
      <div class="row">
        <input class="form-control col-md-5 mr-4" type="text" name="consulta" placeholder="Digite aqui sua consulta">
        <select class="form-control col-md-2 mr-1" name="campo">
          <option value="nomeEmpresa">Nome da Empresa</option>
          <option value="numeroPedido">Numero do Pedido</option>
          <option value="status">Status de Pagamento</option>
        </select>
        <button type="submit" class="btn btn-dark">Consultar</button>
      </div>
    </div>
  </form>
  <table id="dtBasicExample" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
    <thead>
      <tr>
        <th nowrap="true" class="th-sm">Nome da Empresa</th>
        <th nowrap="true" class="th-sm">Nome Usúario</th>
        <th nowrap="true" class="th-sm">Número Pedido</th>
        <th nowrap="true" class="th-sm">Data do Pedido</th>
        <th nowrap="true" class="th-sm">Valor do Pedido</th>
        <th nowrap="true" class="th-sm">Status de Pagamento</th>
        <th nowrap="true" class="th-sm">Editar Pedido</th>
        <th nowrap="true" class="th-sm">Detalhes do Pedido</th>
      </tr>
    </thead>
    <tbody>
      {% for pedido in pedidos.items%}
      <tr>
        <td nowrap="true" disable="true">{{pedido.Empresa.razao_social}}</td>
        <td nowrap="true" disable="true">{{pedido.Pedido.usuarioSistema.nome}} </td>
        <td nowrap="true" disable="true">{{pedido.Pedido.id_pedido}} </td>
        <td nowrap="true" disable="true">{{pedido.Pedido.dataPedido}} </td>
        <td nowrap="true" disable="true" id="valorPedido" value="{{pedido.Pedido.valor}}">{{pedido.Pedido.valor}}</td>
        <td nowrap="true" disable="true">
          {% if pedido.Pedido.statusPagamento == 0 %}
          Em Aberto
          {% elif pedido.Pedido.statusPagamento == 1 %}
          Pago
          {% else %}
          Cancelado
          {% endif %}
        </td>
        <td nowrap="true" disable="true">
          <a href="/editarPedido/{{pedido.Pedido.id_pedido}}" class="btn btn-danger" role="button">
            Editar Pedido
          </a>

        </td>
        <td nowrap="true" disable="true">
          <a href="/detalhesPedidoAdm/{{pedido.Pedido.id_pedido}}" class="btn btn-info" role="button">
            Detalhes do Pedido
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

</div>

<div class="container  d-flex justify-content-center">
  <nav aria-label="...">
    <ul class="pagination">
      {% if not pedidos.has_prev %}
      <li class="page-item  
    disabled">
        {% endif %}
        <a class="page-link" href="./{{pedidos.prev_num}}">Previous</a>
      </li>
      {% for page in pedidos.iter_pages()%}
      <li class="page-item {% if page == pedidos.page %} 
      active {% endif %}">
        <a class="page-link" href="./{{page}}"> {{page}} <span class="sr-only">(current)</span></a>
      </li>
      {% endfor %}

      {% if not pedidos.has_next %}
      <li class="page-item disabled">
        {% endif %}
        <a class="page-link" href="./{{pedidos.next_num}}">Next</a>
      </li>
    </ul>
  </nav>
</div>


{% endblock %}